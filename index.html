<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>reCAPTCHA Test</title>
    <!-- reCAPTCHA用スクリプトを読み込む -->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body>
    <h1>reCAPTCHAテスト</h1>
    <form id="recaptcha-form" onsubmit="handleSubmit(event)">
        <!-- reCAPTCHAウィジェット -->
        <div class="g-recaptcha" data-sitekey="あなたのサイトキー"></div>
        <button type="submit">送信</button>
    </form>
    <p id="result"></p>

    <script>
        // フォーム送信を処理
        async function handleSubmit(event) {
            event.preventDefault(); // フォームのデフォルト動作を停止
            const resultElement = document.getElementById('result');

            // reCAPTCHAのトークンを取得
            const token = grecaptcha.getResponse();
            if (!token) {
                resultElement.textContent = 'reCAPTCHAに失敗しました。もう一度試してください。';
                return;
            }

            // サーバーへトークンを送信
            const response = await fetch('https://your-backend-url/verify', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ token }),
            });

            const data = await response.json();

            // 検証結果に応じてメッセージを表示
            if (data.success) {
                resultElement.textContent = '成功！';
            } else {
                resultElement.textContent = '失敗しました。';
            }
        }
    </script>
</body>
</html>
